"use strict";(self.webpackChunkportal_interactivo=self.webpackChunkportal_interactivo||[]).push([[1068],{15962:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>c});var i=r(74848),o=r(28453);const d={sidebar_position:4},a="Registar Mini Programa",s={id:"DevelopmentResources/Framework/App/Registrar Mini Program",title:"Registar Mini Programa",description:"App(Object)",source:"@site/docs/DevelopmentResources/Framework/App/Registrar Mini Program.md",sourceDirName:"DevelopmentResources/Framework/App",slug:"/DevelopmentResources/Framework/App/Registrar Mini Program",permalink:"/portal-interactivo/docs/DevelopmentResources/Framework/App/Registrar Mini Program",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Estilo global",permalink:"/portal-interactivo/docs/DevelopmentResources/Framework/App/estilos global"},next:{title:"getApp",permalink:"/portal-interactivo/docs/DevelopmentResources/Framework/App/getApp"}},l={},c=[{value:"App(Object)",id:"appobject",level:2},{value:"Descripci\xf3n del Par\xe1metro del Objeto",id:"descripci\xf3n-del-par\xe1metro-del-objeto",level:2},{value:"Descripci\xf3n del Par\xe1metro de Opciones onLaunch/onShow.",id:"descripci\xf3n-del-par\xe1metro-de-opciones-onlaunchonshow",level:2},{value:"onHide()",id:"onhide",level:2},{value:"onError()",id:"onerror",level:2},{value:"onUnhandledRejection()",id:"onunhandledrejection",level:2},{value:"Global Data",id:"global-data",level:2},{value:"FAQ",id:"faq",level:2}];function t(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"registar-mini-programa",children:"Registar Mini Programa"}),"\n",(0,i.jsx)(n.h2,{id:"appobject",children:"App(Object)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"App()"})," se utiliza para registrar el Mini Programa, acepta un objeto como par\xe1metro para configurar el ciclo de vida del Mini Programa. ",(0,i.jsx)(n.code,{children:"App()"})," debe ser llamado en app.js y solo debe ser llamado una vez."]}),"\n",(0,i.jsx)(n.h2,{id:"descripci\xf3n-del-par\xe1metro-del-objeto",children:"Descripci\xf3n del Par\xe1metro del Objeto"}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Property"}),(0,i.jsx)("th",{children:"Type"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{children:"Trigger"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"onLaunch"}),(0,i.jsx)("td",{children:"Function"}),(0,i.jsx)("td",{children:"Escucha la inicializaci\xf3n del Mini Programa. Al completarse la inicializaci\xf3n del Mini Programa, se invoca solo una vez."}),(0,i.jsx)("td",{children:"Al completarse la inicializaci\xf3n del Mini Programa."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"onShow"}),(0,i.jsx)("td",{children:"Function"}),(0,i.jsx)("td",{children:"Escucha la visualizaci\xf3n del Mini Programa. Al iniciar el Mini Programa o cambiar al primer plano desde el fondo."}),(0,i.jsx)("td",{children:"Al iniciar el Mini Programa o cambiar al primer plano desde el fondo."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"onHide"}),(0,i.jsx)("td",{children:"Function"}),(0,i.jsx)("td",{children:"Escucha el ocultamiento del Mini Programa. Al cambiar el Mini Programa del primer plano al fondo."}),(0,i.jsx)("td",{children:"Al cambiar el Mini Programa del primer plano al fondo."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"onError"}),(0,i.jsx)("td",{children:"Function"}),(0,i.jsx)("td",{children:"Escucha los errores del Mini Programa. Cuando hay un error en el c\xf3digo JavaScript del Mini Programa."}),(0,i.jsx)("td",{children:"Cuando hay un error en el c\xf3digo JavaScript del Mini Programa."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"onUnhandledRejection"}),(0,i.jsx)("td",{children:"Function"}),(0,i.jsx)("td",{children:"Escucha el evento de rechazo no gestionado."}),(0,i.jsx)("td",{children:"Se desencadena cuando una Promesa de JavaScript que no tiene un manejador de rechazo es rechazada."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definici\xf3n de Primer plano/Fondo:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Cuando el usuario abandona la aplicaci\xf3n m\xf3vil con el bot\xf3n de cierre en la esquina superior derecha o el bot\xf3n de inicio del dispositivo, el Mini Programa no se destruye directamente sino que se cambia al fondo."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Cuando se inicia la aplicaci\xf3n m\xf3vil o se abre nuevamente el Mini Programa, se cambia al primer plano desde el fondo."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Solo cuando el Mini Programa permanece en segundo plano durante cierto tiempo o consume demasiados recursos del sistema, se destruye."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"descripci\xf3n-del-par\xe1metro-de-opciones-onlaunchonshow",children:"Descripci\xf3n del Par\xe1metro de Opciones onLaunch/onShow."}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Propiedad"}),(0,i.jsx)("th",{children:"Tipo"}),(0,i.jsx)("th",{children:"Descripci\xf3n"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"query"}),(0,i.jsx)("td",{children:"Object"}),(0,i.jsx)("td",{children:"Consulta actual del Mini Programa, analizada del campo de consulta en el par\xe1metro de inicio."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"path"}),(0,i.jsx)("td",{children:"String"}),(0,i.jsx)("td",{children:"Direcci\xf3n actual de la p\xe1gina del Mini Programa, analizada del campo de p\xe1gina en el par\xe1metro de inicio, p\xe1gina de inicio por defecto cuando se ignora la p\xe1gina."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"referrerInfo"}),(0,i.jsx)("td",{children:"Object"}),(0,i.jsx)("td",{children:"Informaci\xf3n de origen."})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Este par\xe1metro se puede obtener del m\xe9todo ",(0,i.jsx)(n.code,{children:"onlaunch"})," al primer inicio del mini program"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["El par\xe1metro tambi\xe9n se puede obtener del m\xe9todo ",(0,i.jsx)(n.code,{children:"Onshow"})," cuando el mini program de fondo se reabre con el esquema."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"App({\r\n  onLaunch(options) {\r\n    // first opening\r\n    console.log(options.query);\r\n\t// {number:1}\r\n  },\r\n  onShow(options) {\r\n    // reopening with schema from background\r\n\tconsole.log(options.query);\r\n\t// {number:1}\r\n  },\r\n})\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ReferRerInfo Atributo Descripci\xf3n"})}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Propiedad"}),(0,i.jsx)("th",{children:"Tipo"}),(0,i.jsx)("th",{children:"Descripci\xf3n"}),(0,i.jsx)("th",{children:"Compatibilidad"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"appId"}),(0,i.jsx)("td",{children:"string"}),(0,i.jsx)("td",{children:"Mini Programa de origen."}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"sourceServiceId"}),(0,i.jsx)("td",{children:"String"}),(0,i.jsx)("td",{children:"Plug-in de origen, visible en el modo de ejecuci\xf3n del complemento."}),(0,i.jsx)("td",{children:"1.11.0"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"extraData"}),(0,i.jsx)("td",{children:"Object"}),(0,i.jsx)("td",{children:"Datos transferidos desde el Mini Programa de origen."}),(0,i.jsx)("td",{children:"-"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Notas:"})}),"\n",(0,i.jsx)(n.p,{children:"No operar la pila de p\xe1ginas como redirectTo/navigateTo en el onShow.\r\nLa versi\xf3n de la biblioteca b\xe1sica utilizada actualmente en AppContainer es 1.14.2."}),"\n",(0,i.jsx)(n.h2,{id:"onhide",children:"onHide()"}),"\n",(0,i.jsxs)(n.p,{children:["El m\xe9todo ",(0,i.jsx)(n.code,{children:"onHide()"})," se activar\xe1 cuando el Mini Programa cambie de primer plano a fondo."]}),"\n",(0,i.jsx)(n.p,{children:"C\xf3digo de ejemplo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"App({\r\n  onHide() {\r\n    // when changes to background\r\n    console.log('app hide');\r\n  },\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"onerror",children:"onError()"}),"\n",(0,i.jsxs)(n.p,{children:["El m\xe9todo ",(0,i.jsx)(n.code,{children:"onError()"})," se activar\xe1 cuando ocurra el error de script."]}),"\n",(0,i.jsx)(n.p,{children:"C\xf3digo de muestra"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"App({\r\n  onError(error) {\r\n    // the Mini Program script error happens\r\n    console.log(error);\r\n  },\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"onunhandledrejection",children:"onUnhandledRejection()"}),"\n",(0,i.jsxs)(n.p,{children:["El m\xe9todo onUnhandledRejection() se activar\xe1 cuando se rechace un JavaScript ",(0,i.jsx)(n.code,{children:"Promise"})," 'que no tiene un controlador de rechazo."]}),"\n",(0,i.jsx)(n.p,{children:"C\xf3digo de ejemplo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"App({\r\n  onUnhandledRejection(res) {\r\n    // A JavaScript Promise that has no rejection handler is rejected.\r\n    console.log(res.reason, res.promise);\r\n    //res.reason describes the rejection reason and res.promise describes the rejected Promise.\r\n  },\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"global-data",children:"Global Data"}),"\n",(0,i.jsxs)(n.p,{children:["Global data se puede configurar en ",(0,i.jsx)(n.code,{children:"App()"}),". Otras p\xe1ginas pueden obtener y modificar los datos globales directamente."]}),"\n",(0,i.jsx)(n.p,{children:"Sample code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// app.js\r\nApp({\r\n  globalData: 1\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"P: \xbfSe puede cerrar mini programa en app.js??"})})}),"\n",(0,i.jsx)(n.p,{children:"R: No, el mini programa solo se puede cerrar haciendo clic en el bot\xf3n Cerrar en la esquina superior derecha."})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var i=r(96540);const o={},d=i.createContext(o);function a(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);
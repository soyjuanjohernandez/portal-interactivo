"use strict";(self.webpackChunkportal_interactivo=self.webpackChunkportal_interactivo||[]).push([[6550],{73720:(e,a,i)=>{i.r(a),i.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>c});var r=i(74848),n=i(28453);const o={sidebar_position:1},s="Personalizar las vistas de autorizaci\xf3n del usuario",t={id:"DevelopmentTool/IAPMiniProgram SDK/IOS/opcional Implementar capacidades avanzadas/Personalizar UI/Personalizar las vistas de autorizaci\xf3n del usuario",title:"Personalizar las vistas de autorizaci\xf3n del usuario",description:"Para preocupaciones de privacidad, IAPminiprogram SDK muestra vistas de autorizaci\xf3n de usuarios cuando los mini programas llaman a JSAPIS que requieren acceso a la informaci\xf3n confidencial de los usuarios. La super aplicaci\xf3n puede personalizar estas vistas para crear una interfaz de usuario que coincida con su marca y cumpla con los requisitos regionales regionales.Este tema lo gu\xeda a trav\xe9s de c\xf3mo personalizar la vista de autorizaci\xf3n del usuario.",source:"@site/docs/DevelopmentTool/IAPMiniProgram SDK/IOS/opcional Implementar capacidades avanzadas/Personalizar UI/Personalizar las vistas de autorizaci\xf3n del usuario.md",sourceDirName:"DevelopmentTool/IAPMiniProgram SDK/IOS/opcional Implementar capacidades avanzadas/Personalizar UI",slug:"/DevelopmentTool/IAPMiniProgram SDK/IOS/opcional Implementar capacidades avanzadas/Personalizar UI/Personalizar las vistas de autorizaci\xf3n del usuario",permalink:"/portal-interactivo/docs/DevelopmentTool/IAPMiniProgram SDK/IOS/opcional Implementar capacidades avanzadas/Personalizar UI/Personalizar las vistas de autorizaci\xf3n del usuario",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"Personalizar las capacidades relacionadas con la interfaz de usuario",permalink:"/portal-interactivo/docs/category/personalizar-las-capacidades-relacionadas-con-la-interfaz-de-usuario"},next:{title:"Personalizar el men\xfa M\xe1s",permalink:"/portal-interactivo/docs/DevelopmentTool/IAPMiniProgram SDK/IOS/opcional Implementar capacidades avanzadas/Personalizar UI/Personalizar el men\xfa M\xe1s"}},l={},c=[{value:"Experiencia de usuario predeterminada",id:"experiencia-de-usuario-predeterminada",level:2},{value:"procedimientos",id:"procedimientos",level:2},{value:"Paso 1: implementar GRVAuthDelegate",id:"paso-1-implementar-grvauthdelegate",level:3},{value:"Paso 2: Configurar GRVExtensionDelegate",id:"paso-2-configurar-grvextensiondelegate",level:3},{value:"Protocolo",id:"protocolo",level:2},{value:"GRVAuthDelegate",id:"grvauthdelegate",level:3},{value:"showAuthWithParam:currentViewController:positiveAction:cancelAction:",id:"showauthwithparamcurrentviewcontrollerpositiveactioncancelaction",level:3},{value:"GRVAuthParam",id:"grvauthparam",level:3},{value:"Ap\xe9ndices",id:"ap\xe9ndices",level:2},{value:"C\xf3mo se especifica el par\xe1metro de \xe1mbitos",id:"c\xf3mo-se-especifica-el-par\xe1metro-de-\xe1mbitos",level:3},{value:"Ilustraci\xf3n de la vista de autorizaci\xf3n del usuario",id:"ilustraci\xf3n-de-la-vista-de-autorizaci\xf3n-del-usuario",level:3}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.h1,{id:"personalizar-las-vistas-de-autorizaci\xf3n-del-usuario",children:"Personalizar las vistas de autorizaci\xf3n del usuario"}),"\n",(0,r.jsx)(a.p,{children:"Para preocupaciones de privacidad, IAPminiprogram SDK muestra vistas de autorizaci\xf3n de usuarios cuando los mini programas llaman a JSAPIS que requieren acceso a la informaci\xf3n confidencial de los usuarios. La super aplicaci\xf3n puede personalizar estas vistas para crear una interfaz de usuario que coincida con su marca y cumpla con los requisitos regionales regionales.Este tema lo gu\xeda a trav\xe9s de c\xf3mo personalizar la vista de autorizaci\xf3n del usuario."}),"\n",(0,r.jsx)(a.h2,{id:"experiencia-de-usuario-predeterminada",children:"Experiencia de usuario predeterminada"}),"\n",(0,r.jsx)(a.p,{children:"Si elige no proporcionar vistas personalizadas de autorizaci\xf3n de usuario, el SDK muestra las vistas en forma de una ventana emergente inferior en la pantalla. Puede consultar la siguiente imagen para obtener un ejemplo de vista predeterminado:"}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.img,{alt:"Experiencia de usuario predeterminada",src:i(81472).A+"",width:"828",height:"1792"})}),"\n",(0,r.jsx)(a.h2,{id:"procedimientos",children:"procedimientos"}),"\n",(0,r.jsx)(a.p,{children:"Tome los siguientes dos pasos para personalizar sus vistas de autorizaci\xf3n:"}),"\n",(0,r.jsx)(a.h3,{id:"paso-1-implementar-grvauthdelegate",children:"Paso 1: implementar GRVAuthDelegate"}),"\n",(0,r.jsxs)(a.p,{children:["Cree una clase que implementa el protocolo ",(0,r.jsx)(a.code,{children:"GRVAuthDelegate"})," para definir y crear una vista de autorizaci\xf3n de usuario personalizada. Consulte el siguiente c\xf3digo de muestra para la implementaci\xf3n:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-js",children:"@interface DemoAuthDelegateImpl : NSObject<GRVAuthDelegate>\r\n\r\n@end\r\n\r\n@implementation DemoAuthDelegateImpl\r\n    \r\n- (void)showAuthWithParam:(GRVAuthParam *)param\r\ncurrentViewController:(UIViewController*)currentViewController\r\n      positiveAction:(GRVAuthActionBlock _Nullable)positiveAction\r\n        cancelAction:(GRVAuthActionBlock _Nullable)cancelAction \r\n{\r\n    DemoAuthViewController *authViewController = [[DemoAuthViewController alloc] init];\r\n    authViewController.param = param;\r\n    authViewController.positiveAction = positiveAction;\r\n    authViewController.cancelAction = cancelAction;\r\n    [currentViewController presentViewController:authViewController animated:YES completion:nil];        \r\n}\r\n@end\n"})}),"\n",(0,r.jsxs)(a.p,{children:["Para obtener m\xe1s informaci\xf3n sobre este protocolo, consulte ",(0,r.jsx)(a.a,{href:"/",children:(0,r.jsx)(a.code,{children:"GRVAuthDelegate"})}),"."]}),"\n",(0,r.jsx)(a.h3,{id:"paso-2-configurar-grvextensiondelegate",children:"Paso 2: Configurar GRVExtensionDelegate"}),"\n",(0,r.jsxs)(a.p,{children:["Antes de la l\xf3gica de inicializaci\xf3n de SDK, configure ",(0,r.jsx)(a.code,{children:"GRVExtensionDelegate"})," y registre el protocolo GRVAUTHDELEGATE implementado en el SDK con el siguiente c\xf3digo de muestra:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-js",children:"let extensionDelegate = GRVExtensionDelegate()\r\nextensionDelegate.uiProvider.authDelegate = DemoAuthDelegateImpl();\n"})}),"\n",(0,r.jsx)(a.h2,{id:"protocolo",children:"Protocolo"}),"\n",(0,r.jsx)(a.h3,{id:"grvauthdelegate",children:"GRVAuthDelegate"}),"\n",(0,r.jsx)(a.p,{children:"El protocolo GRVAuthDelegate se utiliza para personalizar la vista de autorizaci\xf3n del usuario que est\xe1 asociada con un JSAPI espec\xedfico. El siguiente c\xf3digo muestra la definici\xf3n de este protocolo:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-js",children:"@protocol GRVAuthDelegate <NSObject>\r\n@required\r\n- (void)showAuthWithParam:(GRVAuthParam *)param\r\ncurrentViewController:(UIViewController *)currentViewController\r\n      positiveAction:(GRVAuthActionBlock _Nullable)positiveAction\r\n        cancelAction:(GRVAuthActionBlock _Nullable)cancelAction;\r\n@end\n"})}),"\n",(0,r.jsx)(a.p,{children:"Como podemos ver en la definici\xf3n anterior, este protocolo proporciona el siguiente m\xe9todo:"}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"M\xe9todo"}),(0,r.jsx)("th",{children:"Descripci\xf3n"}),(0,r.jsx)("th",{children:"Requerido"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"showAuthWithParam:currentViewController:positiveAction:cancelAction:"}),(0,r.jsxs)("td",{children:["El SDK llama a este m\xe9todo para mostrar la vista de autorizaci\xf3n de usuario personalizada.Para obtener m\xe1s informaci\xf3n, ",(0,r.jsx)(a.a,{href:"/",children:(0,r.jsx)(a.code,{children:"consulteshowAuthWithParam:currentViewController:positiveAction:cancelAction:"})}),"."]}),(0,r.jsx)("td",{children:"M"})]})]}),"\n",(0,r.jsx)(a.h3,{id:"showauthwithparamcurrentviewcontrollerpositiveactioncancelaction",children:"showAuthWithParam:currentViewController:positiveAction:cancelAction:"}),"\n",(0,r.jsxs)(a.p,{children:["El ",(0,r.jsx)(a.code,{children:"showAuthWithParam:currentViewController:positiveAction:cancelAction:"}),"El m\xe9todo tiene los siguientes par\xe1metros:"]}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Campo"}),(0,r.jsx)("th",{children:"Tipo de datos"}),(0,r.jsx)("th",{children:"Descripci\xf3n"}),(0,r.jsx)("th",{children:"Requerido"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"param"}),(0,r.jsx)("td",{children:"GRVAuthParam *"}),(0,r.jsx)("td",{children:"La informaci\xf3n de una vista de autorizaci\xf3n del usuario.Para obtener m\xe1s informaci\xf3n, consulte GRVAUTHPARAM."}),(0,r.jsx)("td",{children:"M"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"currentViewController"}),(0,r.jsx)("td",{children:"UIViewController *"}),(0,r.jsx)("td",{children:"El controlador de vista actual que muestra la vista de autorizaci\xf3n del usuario."}),(0,r.jsx)("td",{children:"M"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"positiveAction"}),(0,r.jsx)("td",{children:"GRVAuthActionBlock"}),(0,r.jsx)("td",{children:"El callback que se ejecuta cuando el usuario aprueba la autorizaci\xf3n."}),(0,r.jsx)("td",{children:"O"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"cancelAction"}),(0,r.jsx)("td",{children:"GRVAuthActionBlock"}),(0,r.jsx)("td",{children:"El callback que se ejecuta cuando el usuario niega la autorizaci\xf3n."}),(0,r.jsx)("td",{children:"O"})]})]}),"\n",(0,r.jsx)(a.h3,{id:"grvauthparam",children:"GRVAuthParam"}),"\n",(0,r.jsxs)(a.p,{children:["El siguiente c\xf3digo muestra la definici\xf3n de la interfaz ",(0,r.jsx)(a.code,{children:"GRVAuthParam"}),":"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-js",children:"@interface GRVAuthParam : NSObject\r\n@property(nonatomic, copy)NSArray<NSString *> *scopes;\r\n@property(nonatomic, copy)NSString *content;\r\n@property(nonatomic, copy)NSString *title;\r\n@property(nonatomic, strong)UIImage *authIcon;\r\n@property(nonatomic, strong)UIImage *miniProgramLogo;\r\n@property(nonatomic, copy)NSString *miniProgramName;\r\n@end\n"})}),"\n",(0,r.jsx)(a.p,{children:"Como podemos ver en el c\xf3digo anterior, esta interfaz tiene los siguientes par\xe1metros:"}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Campo"}),(0,r.jsx)("th",{children:"Tipo de datos"}),(0,r.jsx)("th",{children:"Descripci\xf3n"}),(0,r.jsx)("th",{children:"Requerido"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"scopes"}),(0,r.jsx)("td",{children:(0,r.jsx)(a.code,{children:"NSArray<NSString *> *"})}),(0,r.jsxs)("td",{children:[(0,r.jsx)(a.p,{children:"Los \xe1mbitos que requieren autorizaci\xf3n del usuario al llamar a un JSAPI espec\xedfico.Los valores v\xe1lidos son:"}),(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"Album"}),": El JSAPI requiere acceso al \xe1lbum del usuario."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"Camera"}),": El JSAPI requiere acceso a la c\xe1mara del usuario."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"Location"}),": El JSAPI requiere acceso a la ubicaci\xf3n del usuario.\r\nPara obtener c\xf3mo se asignan los valores, ",(0,r.jsx)(a.a,{href:"/",children:"consulte c\xf3mo se especifica el par\xe1metro Scopes"}),"."]}),"\n"]})]}),(0,r.jsx)("td",{children:"M"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"content"}),(0,r.jsx)("td",{children:"NSString *"}),(0,r.jsx)("td",{children:"El alcance de la descripci\xf3n en la vista predeterminada.Para una ilustraci\xf3n visual, consulte la ilustraci\xf3n de la vista de autorizaci\xf3n del usuario."}),(0,r.jsx)("td",{children:"M"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"title"}),(0,r.jsx)("td",{children:"NSString *"}),(0,r.jsx)("td",{children:"El mensaje de permiso en la vista predeterminada.Para una ilustraci\xf3n visual, consulte la ilustraci\xf3n de la vista de autorizaci\xf3n del usuario."}),(0,r.jsx)("td",{children:"M"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"authIcon"}),(0,r.jsx)("td",{children:"UIImage *"}),(0,r.jsx)("td",{children:"La URL del icono en la vista predeterminada.Para una ilustraci\xf3n visual, consulte la ilustraci\xf3n de la vista de autorizaci\xf3n del usuario."}),(0,r.jsx)("td",{children:"M"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"miniProgramLogo"}),(0,r.jsx)("td",{children:"UIImage *"}),(0,r.jsx)("td",{children:"El logotipo del programa MINI que llama a JSAPI y requiere acceso a los \xe1mbitos especificados."}),(0,r.jsx)("td",{children:"M"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"miniProgramName"}),(0,r.jsx)("td",{children:"NSString *"}),(0,r.jsx)("td",{children:"El nombre del mini programa que llama al JSAPI y requiere acceso a los \xe1mbitos especificados."}),(0,r.jsx)("td",{children:"M"})]})]}),"\n",(0,r.jsx)(a.h2,{id:"ap\xe9ndices",children:"Ap\xe9ndices"}),"\n",(0,r.jsx)(a.h3,{id:"c\xf3mo-se-especifica-el-par\xe1metro-de-\xe1mbitos",children:"C\xf3mo se especifica el par\xe1metro de \xe1mbitos"}),"\n",(0,r.jsx)(a.p,{children:"IApminiprogram SDK especifica el par\xe1metro de \xe1mbitos de acuerdo con los \xe1mbitos requeridos de JSAPI.Sin embargo, si el usuario autoriza un cierto alcance para un JSAPI, no necesita autorizaci\xf3n repetida para otro JSAPI.Por lo tanto, no pasamos los valores correspondientes para los \xe1mbitos autorizados.Consulte la siguiente tabla para el JSAPIS y sus \xe1mbitos requeridos respectivamente:"}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"JSAPIs"}),(0,r.jsx)("th",{children:"Required scopes"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Location JSAPIs (e.g., my.getLocation)"}),(0,r.jsx)("td",{children:"scope.location"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Image JSAPIs (e.g., my.chooseImage)"}),(0,r.jsx)("td",{children:"scope.album, scope.camera"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Video JSAPIs (e.g., my.chooseVideo)"}),(0,r.jsx)("td",{children:"scope.album, scope.camera"})]})]}),"\n",(0,r.jsx)(a.h3,{id:"ilustraci\xf3n-de-la-vista-de-autorizaci\xf3n-del-usuario",children:"Ilustraci\xf3n de la vista de autorizaci\xf3n del usuario"}),"\n",(0,r.jsx)(a.p,{children:"La siguiente imagen ilustra los diversos elementos y sus posiciones en una vista de autorizaci\xf3n de usuario predeterminada:"}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.img,{alt:"Ilustraci\xf3n de la vista de autorizaci\xf3n del usuario",src:i(59803).A+"",width:"846",height:"539"})})]})}function u(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},81472:(e,a,i)=>{i.d(a,{A:()=>r});const r=i.p+"assets/images/customize1-fd78c1f29a71c5b226bffaf381730602.png"},59803:(e,a,i)=>{i.d(a,{A:()=>r});const r=i.p+"assets/images/customize2-fa271a6502166b35dc1fa42238e24457.png"},28453:(e,a,i)=>{i.d(a,{R:()=>s,x:()=>t});var r=i(96540);const n={},o=r.createContext(n);function s(e){const a=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(o.Provider,{value:a},e.children)}}}]);
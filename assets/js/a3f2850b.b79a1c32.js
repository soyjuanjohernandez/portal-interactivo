"use strict";(self.webpackChunkportal_interactivo=self.webpackChunkportal_interactivo||[]).push([[5732],{39509:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var i=n(74848),a=n(28453);const t={sidebar_position:6},s="Cifrar datos locales para una seguridad mejorada",o={id:"DevelopmentTool/IAPMiniProgram SDK/Android/opcional Implementar capacidades avanzadas/Cifrar datos locales para una seguridad mejorada",title:"Cifrar datos locales para una seguridad mejorada",description:"Por defecto, IAPminiprogram SDK almacena datos de JSAPIS de almacenamiento local (my.getStorage, my.getStorageSync, my.setStorage, and my.setStorageSync)en texto sin formato.Para mejorar la seguridad de los datos locales, la Super App puede personalizar el proceso de cifrado y descifrado utilizando la interfaz `GriversecurityExtension`. Este tema lo gu\xeda a trav\xe9s de los pasos y proporciona c\xf3digos de muestra para el cifrado y descifrado de datos locales.",source:"@site/docs/DevelopmentTool/IAPMiniProgram SDK/Android/opcional Implementar capacidades avanzadas/Cifrar datos locales para una seguridad mejorada.md",sourceDirName:"DevelopmentTool/IAPMiniProgram SDK/Android/opcional Implementar capacidades avanzadas",slug:"/DevelopmentTool/IAPMiniProgram SDK/Android/opcional Implementar capacidades avanzadas/Cifrar datos locales para una seguridad mejorada",permalink:"/portal-interactivo/docs/DevelopmentTool/IAPMiniProgram SDK/Android/opcional Implementar capacidades avanzadas/Cifrar datos locales para una seguridad mejorada",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"docsSidebar",previous:{title:"Abrir un miniprograma a trav\xe9s de un c\xf3digo QR promocional",permalink:"/portal-interactivo/docs/DevelopmentTool/IAPMiniProgram SDK/Android/opcional Implementar capacidades avanzadas/Abra un miniprograma a trav\xe9s de un c\xf3digo QR promocional"},next:{title:"Configuraci\xf3n general",permalink:"/portal-interactivo/docs/category/configuraci\xf3n-general"}},d={},c=[{value:"procedimientos",id:"procedimientos",level:2},{value:"Paso 1: Implementar GriverSecurityExtension",id:"paso-1-implementar-griversecurityextension",level:2},{value:"Interfaces",id:"interfaces",level:2},{value:"GriverSecurityExtension",id:"griversecurityextension",level:2},{value:"encrypt",id:"encrypt",level:2},{value:"decrypt",id:"decrypt",level:2}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h1,{id:"cifrar-datos-locales-para-una-seguridad-mejorada",children:"Cifrar datos locales para una seguridad mejorada"}),"\n",(0,i.jsxs)(r.p,{children:["Por defecto, IAPminiprogram SDK almacena datos de JSAPIS de almacenamiento local (",(0,i.jsx)(r.a,{href:"/",children:"my.getStorage"}),", ",(0,i.jsx)(r.a,{href:"/",children:"my.getStorageSync"}),", ",(0,i.jsx)(r.a,{href:"/",children:"my.setStorage"}),", and ",(0,i.jsx)(r.a,{href:"/",children:"my.setStorageSync"}),")en texto sin formato.Para mejorar la seguridad de los datos locales, la Super App puede personalizar el proceso de cifrado y descifrado utilizando la interfaz ",(0,i.jsx)(r.code,{children:"GriversecurityExtension"}),". Este tema lo gu\xeda a trav\xe9s de los pasos y proporciona c\xf3digos de muestra para el cifrado y descifrado de datos locales."]}),"\n",(0,i.jsx)(r.h2,{id:"procedimientos",children:"procedimientos"}),"\n",(0,i.jsx)(r.p,{children:"Tome los siguientes dos pasos para personalizar el proceso de cifrado y descifrado de los datos locales:"}),"\n",(0,i.jsx)(r.h2,{id:"paso-1-implementar-griversecurityextension",children:"Paso 1: Implementar GriverSecurityExtension"}),"\n",(0,i.jsxs)(r.p,{children:["Cree una clase que implementa la interfaz GriverSecurityExtension. Dentro de esta clase, personalice la l\xf3gica de cifrado y descifrado con su algoritmo deseado utilizando los m\xe9todos ",(0,i.jsx)(r.code,{children:"encrypt"})," y ",(0,i.jsx)(r.code,{children:"decrypt"})," respectivamente.Consulte el siguiente c\xf3digo de muestra para la implementaci\xf3n:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-js",children:'public class YourExtensionImpl implements GriverSecurityExtension {\r\n    \r\n    private static final String PREFIX = "_com_grv_";\r\n    \r\n    @Override\r\n    public String getIdentifier() {\r\n        return PREFIX;\r\n    }\r\n\r\n    @Override\r\n    public String encrypt(String data) {\r\n        //Implement the logic to encrypt data\r\n        String encryptedData = ...;\r\n        return encryptedData;\r\n    }\r\n\r\n    @Override\r\n    public String decrypt(String data, String identifier) {\r\n        //Implement the logic to decrypt data\r\n        String decryptedData = ...;\r\n        return decryptedData;\r\n    }\r\n}\n'})}),"\n",(0,i.jsxs)(r.p,{children:["Para obtener m\xe1s informaci\xf3n sobre esta interfaz, consulte ",(0,i.jsx)(r.a,{href:"/",children:(0,i.jsx)(r.code,{children:"GriverSecurityExtension"})}),".Al escribir la l\xf3gica de cifrado y descifrado de datos, tambi\xe9n puede usar los m\xe9todos de instancia p\xfablica proporcionados por SecurityGuardLitManager para implementar el algoritmo AES256.Consulte el siguiente c\xf3digo de muestra para la implementaci\xf3n:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-js",children:'\r\npackage com.alibaba.griver.base.common.security;\r\n\r\nimport android.text.TextUtils;\r\n\r\nimport com.alibaba.griver.api.common.security.GriverSecurityExtension;\r\nimport com.alibaba.griver.base.common.env.GriverEnv;\r\nimport com.alibaba.griver.base.common.utils.ReflectUtils;\r\nimport com.alipay.plus.security.lite.SecurityGuardLiteManager;\r\n\r\npublic class YourExtensionImpl implements GriverSecurityExtension {\r\n    \r\n    private static final String PREFIX = "GriverDataSecurityExtension";\r\n\r\n\r\n    @Override\r\n    public String getIdentifier() {\r\n        return PREFIX;\r\n    }\r\n\r\n    @Override\r\n    public String encrypt(String data) {\r\n        if (TextUtils.isEmpty(data)) {\r\n            return data;\r\n        }\r\n        if (isSecurityLiteLibExist()) {\r\n            try {\r\n                String encryptedData = SecurityGuardLiteManager.getInstance(applicationContext).encrypt(data);\r\n                return encryptedData;\r\n            } catch (Throwable e) {\r\n                return null;\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    @Override\r\n    public String decrypt(String data, String identifier) {\r\n        if (!TextUtils.equals(getIdentifier(), identifier)) {\r\n            return null;\r\n        }\r\n        if (TextUtils.isEmpty(data)) {\r\n            return data;\r\n        }\r\n        if (isSecurityLiteLibExist()) {\r\n            try {\r\n                String decryptedData = SecurityGuardLiteManager.getInstance(GriverEnv.getApplicationContext()).decrypt(data);\r\n                return decryptedData;\r\n            } catch (Throwable e) {\r\n                return null;\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    private boolean isSecurityLiteLibExist() {\r\n        return ReflectUtils.classExist("com.alipay.plus.security.lite.SecurityGuardLiteManager");\r\n    }\r\n\r\n}\n'})}),"\n",(0,i.jsxs)(r.p,{children:["Paso 2: Registre GriverSecurityExtension\r\nDespu\xe9s de la l\xf3gica de inicializaci\xf3n de SDK, llame a la API de ",(0,i.jsx)(r.strong,{children:"registerExtension"}),"  de registro para registrar la interfaz de ",(0,i.jsx)(r.code,{children:"GriverSecurityExtension"})," implementada al SDK con el siguiente c\xf3digo de muestra:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-js",children:"InitConfig initConfig = new InitConfig;\r\n//....\r\nIAPConnect.init(context, initConfig, new InitCallback() {\r\n    @Override\r\n    public void onSuccess() {\r\n        //Registre la extensi\xf3n despu\xe9s de una inicial exitosa\r\n        YourExtensionImpl extension = new YourExtensionImpl();\r\n        Griver.registerExtension(\r\n                new GriverExtensionManifest(GriverSecurityExtension.class, extension));\r\n    }\r\n\r\n    @Override\r\n    public void onFailure(final InitErrorCode errorCode, final String errorMessage) {\r\n\r\n    }\r\n});\r\n\n"})}),"\n",(0,i.jsxs)(r.p,{children:["Para obtener m\xe1s informaci\xf3n sobre la API de ",(0,i.jsx)(r.strong,{children:"registerExtension"}),", consulte ",(0,i.jsx)(r.a,{href:"/",children:"registerExtension"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,i.jsx)(r.h2,{id:"griversecurityextension",children:"GriverSecurityExtension"}),"\n",(0,i.jsxs)(r.p,{children:["La interfaz ",(0,i.jsx)(r.code,{children:"GriverSecurityExtension"})," se utiliza para personalizar el proceso de cifrado y descifrado de datos locales.El siguiente c\xf3digo muestra la definici\xf3n de esta interfaz:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-js",children:"public interface GriverSecurityExtension extends GriverExtension {\r\n    String getIdentifier();\r\n    String encrypt(String data);\r\n    String decrypt(String data, String identifier);\r\n}\n"})}),"\n",(0,i.jsxs)(r.p,{children:["Como se muestra en la definici\xf3n de la interfaz, la interfaz ",(0,i.jsx)(r.code,{children:"GriverSecurityExtension"})," proporciona los siguientes m\xe9todos:"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"M\xe9todo"}),(0,i.jsx)("th",{children:"Descripci\xf3n"}),(0,i.jsx)("th",{children:"Requerido"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"getIdentifier"}),(0,i.jsxs)("td",{children:["TEl m\xe9todo que la super aplicaci\xf3n utiliza para obtener un identificador predefinido que representa el encriptador.No establezca el valor devuelto en NULL porque se requiere en el m\xe9todo ",(0,i.jsx)(r.code,{children:"decrypt"}),"  para determinar si los datos est\xe1n encriptados y la l\xf3gica de descifrado debe ejecutarse."]}),(0,i.jsx)("td",{children:"M"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"encrypt"}),(0,i.jsxs)("td",{children:[(0,i.jsx)(r.p,{children:"El m\xe9todo que la super aplicaci\xf3n utiliza para cifrar los datos dados con un algoritmo espec\xedfico.Establezca el valor devuelto en lo siguiente:"}),(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Los datos cifrados si el cifrado tiene \xe9xito."}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"null"})," Si el cifrado falla.\r\nPara obtener m\xe1s informaci\xf3n, consulte ",(0,i.jsx)(r.a,{href:"/",children:(0,i.jsx)(r.code,{children:"encrypt"})}),"."]}),"\n"]})]}),(0,i.jsx)("td",{children:"M"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"decrypt"}),(0,i.jsxs)("td",{children:[(0,i.jsx)(r.p,{children:"El m\xe9todo que utiliza la super aplicaci\xf3n para descifrar los datos dados con el mismo algoritmo utilizado para el cifrado.Establezca el valor devuelto en lo siguiente:"}),(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Los datos descifrados si el descifrado tiene \xe9xito."}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"null"})," Si el descifrado falla.\r\nPara obtener m\xe1s informaci\xf3n, consulte ",(0,i.jsx)(r.a,{href:"/",children:(0,i.jsx)(r.code,{children:"decrypt"})}),"."]}),"\n"]})]}),(0,i.jsx)("td",{children:"M"})]})]}),"\n",(0,i.jsx)(r.h2,{id:"encrypt",children:"encrypt"}),"\n",(0,i.jsxs)(r.p,{children:["El m\xe9todo ",(0,i.jsx)(r.code,{children:"encrypt"})," tiene el siguiente par\xe1metro de entrada:"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Campo"}),(0,i.jsx)("th",{children:"Tipo de datos"}),(0,i.jsx)("th",{children:"Descripci\xf3n"}),(0,i.jsx)("th",{children:"Requerido"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"data"}),(0,i.jsx)("td",{children:"String"}),(0,i.jsx)("td",{children:"Datos a encriptar."}),(0,i.jsx)("td",{children:"M"})]})]}),"\n",(0,i.jsx)(r.h2,{id:"decrypt",children:"decrypt"}),"\n",(0,i.jsx)(r.p,{children:"El m\xe9todo decrypt tiene los siguientes par\xe1metros de entrada:"}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Campo"}),(0,i.jsx)("th",{children:"Tipo de datos"}),(0,i.jsx)("th",{children:"Descripci\xf3n"}),(0,i.jsx)("th",{children:"Requerido"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"data"}),(0,i.jsx)("td",{children:"String"}),(0,i.jsx)("td",{children:"Datos a descifrar."}),(0,i.jsx)("td",{children:"M"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"identifier"}),(0,i.jsx)("td",{children:"String"}),(0,i.jsxs)("td",{children:["El identificador que especifica la superpecci\xf3n para representar al encriptador.Este identificador debe coincidir con el valor devuelto del m\xe9todo ",(0,i.jsx)(r.code,{children:"getIdentifier"})," para ejecutar la l\xf3gica de descifrado.Si los valores no coinciden, regrese nulo a trav\xe9s del m\xe9todo Decrypt."]}),(0,i.jsx)("td",{children:"M"})]})]})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>o});var i=n(96540);const a={},t=i.createContext(a);function s(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);